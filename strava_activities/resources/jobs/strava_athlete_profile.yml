resources:
  jobs:
    strava_athlete_profile:
      name: strava_athlete_profile
      tasks:
        - task_key: strava_athlete_profile_raw
          python_wheel_task:
            package_name: strava-activities
            entry_point: strava_athlete_profile_raw
            parameters:
              - --config_file_name
              - ${var.config_file_name}
          environment_key: strava_athlete_profile_raw_environment
          new_cluster:
            node_type_id: "serverless"
            environment_variables:
              STRAVA_API_KEY: "{{secrets/${var.strava_secret_scope}/${var.strava_client_secret_name}}}"
      queue:
        enabled: true
      environments:
        - environment_key: strava_athlete_profile_raw_environment
          spec:
            dependencies:
              - /Workspace/Users/rajnil94.guha@gmail.com/dev/.bundle/strava_activities/dev/artifacts/.internal/strava_activities-0.0.1-py3-none-any.whl
            environment_version: "4"
      performance_target: PERFORMANCE_OPTIMIZED
